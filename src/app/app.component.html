<header class="app-header panel container-fluid py-3">
  <div class="d-flex flex-column flex-lg-row align-items-start align-items-lg-center justify-content-between gap-3">
    <h1 class="m-0 fw-bold text-white">Horse Racing</h1>

    <div class="d-flex justify-content-center align-items-center">
      <app-control-panel
        [running]="running()"
        [paused]="paused()"
        [canStart]="!!activeRound()"
        (generate)="generateGame()"
        (start)="startRace()"
        (pause)="pause()"
        (resume)="resume()"
        (reset)="reset()">
      </app-control-panel>
    </div>
  </div>
</header>

<main *ngIf="horses().length" class="container-fluid py-3">
  <div class="row g-3">
    <!-- Left -->
    <section class="col-12 col-lg-3">
      <div class="panel h-100">
        <h3 class="fw-bold text-white mb-2">Horse List</h3>
        <ul class="list-unstyled">
          <li *ngFor="let h of horses()" class="mb-2 d-flex align-items-center gap-2">
            <span class="chip" [ngStyle]="{ background: h.color }">{{ h?.name }}</span>
            <span class="small">COND {{ h?.condition }}</span>
          </li>
        </ul>
      </div>
    </section>

    <!-- Center / Track -->
    <section class="col-12 col-lg-6">
      <div class="panel h-100">
        <app-track
          *ngIf="activeRound() as round"
          [round]="round"
          [horses]="horses()"
          [positions]="positions()"
          (trackWidthChanged)="onResizeTrackWidth($event)">
        </app-track>
      </div>
    </section>

    <!-- Right / Results -->
    <section class="col-12 col-lg-3">
      <div class="panel h-100">
        <app-results [rounds]="rounds()" [horses]="horses()"></app-results>
      </div>
    </section>
  </div>
</main>
